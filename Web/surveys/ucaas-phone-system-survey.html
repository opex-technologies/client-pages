<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UCaaS Phone System Survey</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, Helvetica, sans-serif;
            line-height: 1.6;
            color: #1a2859;
            background: linear-gradient(135deg, #ffffff 0%, #a8c5e7 100%);
            min-height: 100vh;
            padding: 20px 0;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(26, 40, 89, 0.15);
            overflow: hidden;
        }
        
        .header {
            background: #ffffff;
            color: #1a2859;
            padding: 30px 40px;
            text-align: center;
            border-bottom: 3px solid #00c4cc;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .header-logo {
            position: absolute;
            left: 40px;
            top: 50%;
            transform: translateY(-50%);
            height: 60px;
            width: auto;
        }
        
        .header-content {
            flex: 1;
        }
        
        .header h1 {
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 8px;
            letter-spacing: -0.3px;
        }
        
        .header p {
            font-size: 1rem;
            opacity: 0.9;
            font-weight: 300;
        }
        
        .form-container {
            padding: 40px;
        }
        
        .progress-bar {
            background: rgba(168, 197, 231, 0.3);
            height: 6px;
            border-radius: 3px;
            margin-bottom: 40px;
            overflow: hidden;
            position: relative;
        }
        
        .progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.3) 50%, transparent 100%);
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .progress-fill {
            background: linear-gradient(90deg, #00c4cc 0%, #01c1f3 100%);
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 2px;
        }
        
        .section {
            margin-bottom: 48px;
            padding: 32px;
            border: 1px solid rgba(168, 197, 231, 0.3);
            border-radius: 16px;
            background: linear-gradient(135deg, #ffffff 0%, rgba(168, 197, 231, 0.05) 100%);
            transition: all 0.3s ease;
        }
        
        .section:hover {
            border-color: rgba(112, 218, 205, 0.4);
            box-shadow: 0 4px 20px rgba(26, 40, 89, 0.08);
            transform: translateY(-2px);
        }
        
        .section h3 {
            color: #1a2859;
            margin-bottom: 32px;
            font-size: 1.4rem;
            font-weight: 700;
            padding-bottom: 16px;
            border-bottom: 3px solid #00c4cc;
            position: relative;
            letter-spacing: -0.02em;
        }
        
        .section h3::after {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 0;
            width: 60px;
            height: 3px;
            background: #70dacd;
            border-radius: 3px;
        }
        
        .form-group {
            margin-bottom: 32px;
            padding: 20px;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.7);
            border: 1px solid rgba(168, 197, 231, 0.2);
            transition: all 0.2s ease;
        }
        
        .form-group:hover {
            background: rgba(255, 255, 255, 0.9);
            border-color: rgba(112, 218, 205, 0.3);
        }
        
        .form-group:focus-within {
            background: rgba(255, 255, 255, 1);
            border-color: #00c4cc;
            box-shadow: 0 0 0 3px rgba(0, 196, 204, 0.1);
        }
        
        .form-group label {
            display: block;
            margin-bottom: 12px;
            font-weight: 600;
            color: #0d1a3d;
            font-size: 1rem;
            line-height: 1.5;
            letter-spacing: -0.01em;
        }
        
        .form-group .question-category {
            display: inline-flex;
            align-items: center;
            background: linear-gradient(135deg, #70dacd 0%, #01c1f3 100%);
            color: #0d1a3d;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            margin-bottom: 12px;
            letter-spacing: 0.02em;
            text-transform: uppercase;
            box-shadow: 0 2px 8px rgba(112, 218, 205, 0.3);
        }
        
        .form-group .question-category::before {
            content: '•';
            margin-right: 6px;
            font-size: 1.2em;
        }
        
        .radio-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px;
            margin-top: 16px;
        }
        
        .radio-option {
            display: flex;
            align-items: center;
            cursor: pointer;
            padding: 12px 16px;
            border: 2px solid rgba(168, 197, 231, 0.3);
            border-radius: 8px;
            background: #ffffff;
            transition: all 0.3s ease;
            margin-bottom: 0;
            position: relative;
            overflow: hidden;
        }
        
        .radio-option::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(112, 218, 205, 0.1), transparent);
            transition: left 0.5s ease;
        }
        
        .radio-option:hover {
            background: linear-gradient(135deg, rgba(112, 218, 205, 0.08) 0%, #ffffff 100%);
            border-color: #70dacd;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(112, 218, 205, 0.2);
        }
        
        .radio-option:hover::before {
            left: 100%;
        }
        
        .radio-option input[type="radio"] {
            width: auto;
            margin-right: 8px;
            margin-bottom: 0;
            padding: 0;
        }
        
        .radio-option input[type="radio"]:checked + .radio-label {
            font-weight: 600;
            color: #1a2859;
        }
        
        .radio-option:has(input[type="radio"]:checked) {
            background: linear-gradient(135deg, rgba(0, 196, 204, 0.15) 0%, #ffffff 100%);
            border-color: #00c4cc;
            box-shadow: 0 4px 16px rgba(0, 196, 204, 0.25);
            transform: scale(1.02);
        }
        
        .radio-option:has(input[type="radio"]:checked)::after {
            content: '✓';
            position: absolute;
            top: 4px;
            right: 8px;
            color: #00c4cc;
            font-weight: bold;
            font-size: 0.9rem;
        }
        
        .radio-label {
            font-size: 0.9rem;
            color: #0d1a3d;
            cursor: pointer;
            font-weight: 500;
        }
        
        input, textarea, select {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid rgba(168, 197, 231, 0.4);
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.3s ease;
            background: #fff;
            font-weight: 400;
        }
        
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #00c4cc;
            box-shadow: 0 0 0 4px rgba(0, 196, 204, 0.15), 0 4px 12px rgba(0, 196, 204, 0.1);
            transform: translateY(-1px);
        }
        
        textarea {
            resize: vertical;
            min-height: 80px;
            font-family: inherit;
        }
        
        .contact-section {
            background: linear-gradient(135deg, #ffffff 0%, rgba(112, 218, 205, 0.1) 100%);
            border: 1px solid #70dacd;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 25px;
        }
        
        .submit-section {
            margin-top: 48px;
            padding-top: 32px;
            border-top: 2px solid rgba(168, 197, 231, 0.2);
            text-align: center;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.8) 0%, rgba(168, 197, 231, 0.05) 100%);
            border-radius: 16px;
            padding: 32px;
        }
        
        .submit-btn {
            background: linear-gradient(135deg, #00c4cc 0%, #01c1f3 100%);
            color: white;
            padding: 18px 48px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 200px;
            box-shadow: 0 8px 24px rgba(0, 196, 204, 0.3);
            letter-spacing: 0.02em;
            text-transform: uppercase;
            position: relative;
            overflow: hidden;
        }
        
        .submit-btn:hover {
            background: linear-gradient(135deg, #01c1f3 0%, #70dacd 100%);
            transform: translateY(-3px);
            box-shadow: 0 12px 32px rgba(0, 196, 204, 0.4);
        }
        
        .submit-btn:disabled {
            background: #95a5a6;
            cursor: not-allowed;
        }
        
        .status {
            margin-top: 20px;
            padding: 15px 20px;
            border-radius: 6px;
            font-weight: 500;
            display: none;
            font-size: 1rem;
            text-align: center;
            animation: slideIn 0.3s ease;
        }
        
        .success { 
            background: linear-gradient(135deg, #70dacd 0%, #ffffff 100%); 
            color: #1a2859;
            border: 2px solid #70dacd;
        }
        
        .error { 
            background: linear-gradient(135deg, #eed91a 0%, #ffffff 100%); 
            color: #1a2859;
            border: 2px solid #eed91a;
        }
        
        .footer {
            background: linear-gradient(135deg, #1a2859 0%, #00c4cc 100%);
            color: white;
            padding: 25px 40px;
            text-align: center;
            font-size: 0.9rem;
        }
        
        .footer a {
            color: #70dacd;
            text-decoration: none;
        }
        
        .footer a:hover {
            color: white;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @media (max-width: 768px) {
            .header {
                flex-direction: column;
            }
            
            .header-logo {
                position: static;
                transform: none;
                margin-bottom: 16px;
                height: 50px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .radio-group {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <img src="https://storage.googleapis.com/opex-web-forms-20250716-145646/opex-logo.avif" alt="Opex Technologies Logo" class="header-logo">
            <div class="header-content">
                <h1>UCaaS Phone System Survey</h1>
                <p>Unified communications phone system assessment</p>
            </div>
        </div>
        
        <div class="form-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            
            <form id="surveyForm">
                <div class="section contact-section">
                    <h3>Contact Information</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="contact_name">Full Name *</label>
                            <input type="text" id="contact_name" name="contact_name" required placeholder="Your full name">
                        </div>
                        
                        <div class="form-group">
                            <label for="contact_email">Email Address *</label>
                            <input type="email" id="contact_email" name="contact_email" required placeholder="your@email.com">
                        </div>
                        
                        <div class="form-group">
                            <label for="contact_company">Company *</label>
                            <input type="text" id="contact_company" name="contact_company" required placeholder="Your company name">
                        </div>
                        
                        <div class="form-group">
                            <label for="contact_phone">Phone Number</label>
                            <input type="tel" id="contact_phone" name="contact_phone" placeholder="(555) 123-4567">
                        </div>
                    </div>
                </div>
                
                <div class="section">
                    <h3>Assessment Questions</h3>
                    <div id="dynamic-questions">
                        <!-- Questions will be dynamically generated here -->
                    </div>
                </div>
                
                <div class="submit-section">
                    <button type="submit" id="submit-btn" class="submit-btn">Submit Survey</button>
                    <div id="status" class="status"></div>
                </div>
            </form>
        </div>
        
        <div class="footer">
            <p>UCaaS Phone System Survey • 
               <a href="mailto:support@example.com">Need assistance?</a></p>
        </div>
    </div>

    <script>
        const surveyQuestions = [
            {"question": "Company Name", "data_type": "Overview", "input_type": "textarea", "field_id": "field_1"},
            {"question": "Year Founded", "data_type": "Overview", "input_type": "number", "field_id": "field_2"},
            {"question": "Headquarters", "data_type": "Overview", "input_type": "textarea", "field_id": "field_3"},
            {"question": "Ownership", "data_type": "Overview", "input_type": "textarea", "field_id": "field_4"},
            {"question": "Parent Company", "data_type": "Overview", "input_type": "textarea", "field_id": "field_5"},
            {"question": "Number of Clients/Endpoints", "data_type": "Overview", "input_type": "number", "field_id": "field_6"},
            {"question": "Referenceable Clients", "data_type": "Overview", "input_type": "textarea", "field_id": "field_7"},
            {"question": "Number of Employees", "data_type": "Overview", "input_type": "number", "field_id": "field_8"},
            {"question": "Gartner/Forrester/Other Analyst Information", "data_type": "Overview", "input_type": "textarea", "field_id": "field_9"},
            {"question": "CCPA (California Consumer Privacy Act)", "data_type": "Overview", "input_type": "textarea", "field_id": "field_10"},
            {"question": "Support multiple sites", "data_type": "Overview", "input_type": "textarea", "field_id": "field_11"},
            {"question": "Automated failover between multiple datacenters for call control", "data_type": "Overview", "input_type": "textarea", "field_id": "field_12"},
            {"question": "Are datacenters active/active?", "data_type": "Overview", "input_type": "textarea", "field_id": "field_13"},
            {"question": "VM to Email", "data_type": "Overview", "input_type": "textarea", "field_id": "field_14"},
            {"question": "VM to text/SMS", "data_type": "Overview", "input_type": "textarea", "field_id": "field_15"},
            {"question": "VM transcription", "data_type": "Overview", "input_type": "textarea", "field_id": "field_16"},
            {"question": "Shared VM boxes", "data_type": "Overview", "input_type": "textarea", "field_id": "field_17"},
            {"question": "Integrated corporate directory", "data_type": "Overview", "input_type": "textarea", "field_id": "field_18"},
            {"question": "Pull corporate directory from AD", "data_type": "Overview", "input_type": "radio", "field_id": "field_19"},
            {"question": "Add outside phones/numbers to corporate directory", "data_type": "Overview", "input_type": "radio", "field_id": "field_20"},
            {"question": "Do you support gateways for site survivability", "data_type": "Overview", "input_type": "radio", "field_id": "field_21"},
            {"question": "Hunt groups", "data_type": "Overview", "input_type": "radio", "field_id": "field_22"},
            {"question": "Time of day routing for hunt groups", "data_type": "Functional Requirements", "input_type": "radio", "field_id": "field_23"},
            {"question": "Hoteling/Hot Desking", "data_type": "Functional Requirements", "input_type": "radio", "field_id": "field_24"},
            {"question": "Single number reach", "data_type": "Functional Requirements", "input_type": "textarea", "field_id": "field_25"},
            {"question": "Multiple DIDs per user (for ACD integration)", "data_type": "Functional Requirements", "input_type": "radio", "field_id": "field_26"},
            {"question": "Number of concurrent call paths per user", "data_type": "Functional Requirements", "input_type": "number", "field_id": "field_27"},
            {"question": "Forgerock SSO integration (SAML compliant)", "data_type": "Functional Requirements", "input_type": "textarea", "field_id": "field_28"},
            {"question": "Import/provision users from Active Directory", "data_type": "Functional Requirements", "input_type": "radio", "field_id": "field_29"},
            {"question": "Call detail records", "data_type": "Functional Requirements", "input_type": "radio", "field_id": "field_30"},
            {"question": "Automated reports", "data_type": "Functional Requirements", "input_type": "textarea", "field_id": "field_31"},
            {"question": "End user account management", "data_type": "Functional Requirements", "input_type": "textarea", "field_id": "field_32"},
            {"question": "Configuration APIs", "data_type": "Functional Requirements", "input_type": "textarea", "field_id": "field_33"},
            {"question": "Bulk admin by CSV/Import", "data_type": "Functional Requirements", "input_type": "radio", "field_id": "field_34"},
            {"question": "Full admin access for administrators", "data_type": "Functional Requirements", "input_type": "radio", "field_id": "field_35"},
            {"question": "Create hunt group", "data_type": "Functional Requirements", "input_type": "textarea", "field_id": "field_36"},
            {"question": "MACD users", "data_type": "Functional Requirements", "input_type": "textarea", "field_id": "field_37"},
            {"question": "MACD endpoints", "data_type": "Functional Requirements", "input_type": "textarea", "field_id": "field_38"},
            {"question": "MACD Hunt/IVR", "data_type": "Functional Requirements", "input_type": "textarea", "field_id": "field_39"},
            {"question": "Role based access control for admins", "data_type": "Functional Requirements", "input_type": "radio", "field_id": "field_40"},
            {"question": "Softphone client", "data_type": "Functional Requirements", "input_type": "textarea", "field_id": "field_41"},
            {"question": "PC support", "data_type": "Functional Requirements", "input_type": "radio", "field_id": "field_42"},
            {"question": "Mac support", "data_type": "Functional Requirements", "input_type": "radio", "field_id": "field_43"},
            {"question": "Mobile Client", "data_type": "Functional Requirements", "input_type": "textarea", "field_id": "field_44"},
            {"question": "iPhone", "data_type": "Functional Requirements", "input_type": "textarea", "field_id": "field_45"},
            {"question": "Android", "data_type": "Functional Requirements", "input_type": "textarea", "field_id": "field_46"},
            {"question": "Web based client", "data_type": "Functional Requirements", "input_type": "textarea", "field_id": "field_47"},
            {"question": "Chromium Edge", "data_type": "Functional Requirements", "input_type": "radio", "field_id": "field_48"},
            {"question": "Chrome support", "data_type": "Functional Requirements", "input_type": "radio", "field_id": "field_49"},
            {"question": "Hardphone support", "data_type": "Functional Requirements", "input_type": "radio", "field_id": "field_50"},
            {"question": "Polycom", "data_type": "Functional Requirements", "input_type": "radio", "field_id": "field_51"},
            {"question": "Cisco", "data_type": "Functional Requirements", "input_type": "radio", "field_id": "field_52"},
            {"question": "Avaya 9608", "data_type": "Functional Requirements", "input_type": "textarea", "field_id": "field_53"},
            {"question": "Generic SIP endpoints (Crestron, etc.)", "data_type": "Functional Requirements", "input_type": "radio", "field_id": "field_54"},
            {"question": "ATA", "data_type": "Functional Requirements", "input_type": "textarea", "field_id": "field_55"},
            {"question": "Automatic Ringdown (PLAR)", "data_type": "Functional Requirements", "input_type": "textarea", "field_id": "field_56"},
            {"question": "Internal central notification for 911 calls", "data_type": "Functional Requirements", "input_type": "textarea", "field_id": "field_57"},
            {"question": "e911", "data_type": "Functional Requirements", "input_type": "textarea", "field_id": "field_58"},
            {"question": "Included faxing platform", "data_type": "Functional Requirements", "input_type": "textarea", "field_id": "field_59"},
            {"question": "T.38 faxing support for ATAs", "data_type": "Functional Requirements", "input_type": "textarea", "field_id": "field_60"},
            {"question": "Force outbound caller ID per user", "data_type": "Functional Requirements", "input_type": "textarea", "field_id": "field_61"},
            {"question": "Inbound caller ID name and number", "data_type": "Functional Requirements", "input_type": "textarea", "field_id": "field_62"},
            {"question": "Auto Attendant with call handlers", "data_type": "Functional Requirements", "input_type": "textarea", "field_id": "field_63"},
            {"question": "Logging and reporting of administrative activity", "data_type": "Functional Requirements", "input_type": "textarea", "field_id": "field_64"},
            {"question": "Call quality reporting/troubleshooting", "data_type": "Functional Requirements", "input_type": "textarea", "field_id": "field_65"},
            {"question": "Real Time", "data_type": "Functional Requirements", "input_type": "textarea", "field_id": "field_66"},
            {"question": "Historical", "data_type": "Functional Requirements", "input_type": "textarea", "field_id": "field_67"},
            {"question": "Per user calling priveleges (LD, international, etc.) - Extension or calling code based", "data_type": "Functional Requirements", "input_type": "textarea", "field_id": "field_68"},
            {"question": "System wide call blocking", "data_type": "Functional Requirements", "input_type": "radio", "field_id": "field_69"},
            {"question": "Per user incoming call blocking", "data_type": "Functional Requirements", "input_type": "radio", "field_id": "field_70"},
            {"question": "Office 365", "data_type": "Functional Requirements", "input_type": "textarea", "field_id": "field_71"},
            {"question": "MS Outlook", "data_type": "Functional Requirements", "input_type": "textarea", "field_id": "field_72"},
            {"question": "MS Teams", "data_type": "Functional Requirements", "input_type": "radio", "field_id": "field_73"},
            {"question": "InContact Integration", "data_type": "Functional Requirements", "input_type": "textarea", "field_id": "field_74"},
            {"question": "Chromium Edge (click to dial)", "data_type": "Functional Requirements", "input_type": "radio", "field_id": "field_75"},
            {"question": "Endpoint support", "data_type": "Functional Requirements", "input_type": "textarea", "field_id": "field_76"},
            {"question": "Provide local numbers", "data_type": "Functional Requirements", "input_type": "textarea", "field_id": "field_77"},
            {"question": "Provide local outbound calling", "data_type": "Functional Requirements", "input_type": "radio", "field_id": "field_78"},
            {"question": "Port in numbers", "data_type": "Functional Requirements", "input_type": "radio", "field_id": "field_79"},
            {"question": "Provide toll free numbers", "data_type": "Functional Requirements", "input_type": "radio", "field_id": "field_80"},
            {"question": "Local emergency services", "data_type": "Functional Requirements", "input_type": "radio", "field_id": "field_81"},
            {"question": "Phones using local gateways", "data_type": "Functional Requirements", "input_type": "textarea", "field_id": "field_82"},
            {"question": "Total local gateways required", "data_type": "Integrations", "input_type": "textarea", "field_id": "field_83"},
            {"question": "General Company overview", "data_type": "Integrations", "input_type": "textarea", "field_id": "field_84"},
            {"question": "Public or Private Company", "data_type": "Integrations", "input_type": "textarea", "field_id": "field_85"},
            {"question": "2021 revenue & financial Information", "data_type": "Integrations", "input_type": "textarea", "field_id": "field_86"},
            {"question": "Key Acquisitions", "data_type": "Integrations", "input_type": "textarea", "field_id": "field_87"},
            {"question": "Gartner/Forrester/ other analyst information", "data_type": "Integrations", "input_type": "textarea", "field_id": "field_88"},
            {"question": "Referenceable  Clients - Similar Requirements", "data_type": "Integrations", "input_type": "textarea", "field_id": "field_89"},
            {"question": "Proposed data center Address and contact phone number (is to give provide internet providers site info)", "data_type": "Integrations", "input_type": "radio", "field_id": "field_90"},
            {"question": "Please provide details around the ownership of the building that houses the data center.  Is the facility owned or leased?  If it is leased, who holds the lease and what are the terms of the current lease", "data_type": "Country Support", "input_type": "radio", "field_id": "field_91"},
            {"question": "Year data center constructed", "data_type": "Country Support", "input_type": "number", "field_id": "field_92"},
            {"question": "List data center expansions/upgrades (year and nature of work)", "data_type": "Country Support", "input_type": "number", "field_id": "field_93"},
            {"question": "List any airfields, nuclear power plants, chemical works, petroleum storage/distillery within a five-mile radius", "data_type": "Country Support", "input_type": "textarea", "field_id": "field_94"},
            {"question": "Confirm proposed data center is outside the 100 year flood plain", "data_type": "Country Support", "input_type": "number", "field_id": "field_95"},
            {"question": "Has the proposed facility been awarded Tier Standards and Certifications by the Uptime Institute?  If so, what were the Tier Standard and Certifications achieved", "data_type": "Country Support", "input_type": "textarea", "field_id": "field_96"},
            {"question": "Describe office Space/Workspace/Workspace recovery options and availability", "data_type": "Country Support", "input_type": "textarea", "field_id": "field_97"},
            {"question": "Describe the process for bringing new equipment into the data center and removing existing equipment from the data center", "data_type": "Country Support", "input_type": "textarea", "field_id": "field_98"}
        ];

        function generateQuestions() {
            const container = document.getElementById('dynamic-questions');
            
            surveyQuestions.forEach((q, index) => {
                const formGroup = document.createElement('div');
                formGroup.className = 'form-group';
                
                const fieldName = q.question.replace(/[^a-zA-Z0-9]/g, '_').toLowerCase();
                
                let inputElement = '';
                
                switch(q.input_type) {
                    case 'radio':
                        inputElement = `
                            <div class="radio-group">
                                <label class="radio-option">
                                    <input type="radio" name="` + fieldName + `" value="yes" id="` + fieldName + `_yes">
                                    <span class="radio-label">Yes</span>
                                </label>
                                <label class="radio-option">
                                    <input type="radio" name="` + fieldName + `" value="no" id="` + fieldName + `_no">
                                    <span class="radio-label">No</span>
                                </label>
                                <label class="radio-option">
                                    <input type="radio" name="` + fieldName + `" value="partial" id="` + fieldName + `_partial">
                                    <span class="radio-label">Partial/Limited</span>
                                </label>
                            </div>
                        `;
                        break;
                    case 'number':
                        inputElement = `<input type="number" id="` + fieldName + `" name="` + fieldName + `" placeholder="Enter number">`;
                        break;
                    case 'text':
                        inputElement = `<input type="text" id="` + fieldName + `" name="` + fieldName + `" placeholder="Enter text">`;
                        break;
                    case 'textarea':
                    default:
                        inputElement = `<textarea id="` + fieldName + `" name="` + fieldName + `" placeholder="Please provide details..."></textarea>`;
                        break;
                }
                
                formGroup.innerHTML = `
                    <label for="` + fieldName + `">
                        <span class="question-category">` + q.data_type + `</span><br>
                        ` + q.question + `
                    </label>
                    ` + inputElement + `
                `;
                
                container.appendChild(formGroup);
            });
        }

        function updateProgress() {
            const form = document.getElementById('surveyForm');
            let filled = 0;
            let totalQuestions = 0;
            
            const contactInputs = form.querySelectorAll('.contact-section input[required]');
            contactInputs.forEach(input => {
                totalQuestions++;
                if (input.value.trim() !== '') {
                    filled++;
                }
            });
            
            surveyQuestions.forEach(q => {
                totalQuestions++;
                const fieldName = q.question.replace(/[^a-zA-Z0-9]/g, '_').toLowerCase();
                if (q.input_type === 'radio') {
                    const radioChecked = form.querySelector(`input[name="` + fieldName + `"]:checked`);
                    if (radioChecked) {
                        filled++;
                    }
                } else {
                    const input = form.querySelector(`#` + fieldName);
                    if (input && input.value.trim() !== '') {
                        filled++;
                    }
                }
            });
            
            const percentage = totalQuestions > 0 ? (filled / totalQuestions) * 100 : 0;
            document.getElementById('progress-fill').style.width = percentage + '%';
        }

        document.addEventListener('DOMContentLoaded', function() {
            generateQuestions();
            
            const form = document.getElementById('surveyForm');
            form.addEventListener('input', updateProgress);
            form.addEventListener('change', updateProgress);
            
            document.getElementById('surveyForm').addEventListener('submit', async function(e) {
                e.preventDefault();
                
                const submitBtn = document.getElementById('submit-btn');
                const statusDiv = document.getElementById('status');
                const webhookUrl = 'https://opex-form-webhook-4jypryamoq-uc.a.run.app';
                
                submitBtn.disabled = true;
                submitBtn.textContent = 'Submitting...';
                statusDiv.style.display = 'none';
                
                const formData = new FormData(this);
                const data = {
                    formName: 'ucaas-phone-system-survey',
                    formData: {
                        timestamp: new Date().toISOString(),
                        source: 'ucaas-assessment'
                    }
                };
                
                for (let [key, value] of formData.entries()) {
                    data.formData[key] = value;
                }
                
                try {
                    const response = await fetch(webhookUrl, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(data)
                    });
                    
                    if (response.ok) {
                        statusDiv.className = 'status success';
                        statusDiv.textContent = 'Survey submitted successfully! Thank you for your responses.';
                        statusDiv.style.display = 'block';
                        
                        this.reset();
                        updateProgress();
                    } else {
                        throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                    }
                    
                } catch (error) {
                    statusDiv.className = 'status error';
                    statusDiv.textContent = `Error submitting survey: ${error.message}`;
                    statusDiv.style.display = 'block';
                }
                
                submitBtn.disabled = false;
                submitBtn.textContent = 'Submit Survey';
            });
        });
    </script>
</body>
</html>